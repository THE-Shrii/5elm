<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5 ELM - Coming Soon</title>
 <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Halant:wght@300;400;500;600;700&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="content">
    <div class="logo">
      <img src="assets/img/l2.png" alt="5 ELM Logo" />
    </div>

    <h1>Coming soon...</h1>
    <p>
      Born from the five elements, our products are an ode to natureâ€™s purity and timeless Ayurvedic rituals.
      Weâ€™re creating skincare that feels personal, conscious, and deeply connected.
      Weâ€™d love for you to begin this journey with us.
    </p>

    <p>
      Be the first to experience 5 ELM.<br />
      Sign up to get exclusive early access and <span class="span1">enjoy 10% off</span> your first <br> order.
    </p>

   <form id="landing-form">
  <div class="form-group">
    <label for="firstName">FIRST NAME</label>
    <input type="text" id="firstName" placeholder="ENTER FIRST NAME *" required />
    <div class="error-message" id="firstName-error"></div>
  </div>

  <div class="form-group">
    <label for="lastName">LAST NAME</label>
    <input type="text" id="lastName" placeholder="ENTER LAST NAME *" required />
    <div class="error-message" id="lastName-error"></div>
  </div>

  <div class="form-group">
    <label for="email">EMAIL ADDRESS</label>
    <input type="email" id="email" placeholder="ENTER YOUR EMAIL *" required />
    <div class="error-message" id="email-error"></div>
  </div>

  <div class="form-group">
    <label for="phone">CONTACT NO</label>
    <input type="tel" id="phone" placeholder="ENTER CONTACT NUMBER" />
    <div class="error-message" id="phone-error"></div>
  </div>

  <div class="checkbox">
    <input type="checkbox" id="consent" />
    <label for="consent" class="ag1">
      I agree to receive marketing newsletters, offers, and other promotional communications.
    </label>
  </div>

  <button type="submit">Sign Up</button>
  <p id="form-message" style="margin-top: 10px; font-size: 0.8rem;"></p>
</form>

  </div>
  <script>
// ðŸ§  Validation Functions
function validateEmail(email) {
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailPattern.test(email);
}

function validatePhone(phone) {
  if (!phone) return true; // Optional field
  const phonePattern = /^[6-9]\d{9}$/;
  return phonePattern.test(phone);
}

function validateName(name) {
  const namePattern = /^[a-zA-Z\s\-]+$/;
  return namePattern.test(name);
}

function showFieldError(fieldId, message) {
  const field = document.getElementById(fieldId);
  const errorDiv = document.getElementById(`${fieldId}-error`);
  
  field.style.borderColor = '#ff6b6b';
  errorDiv.textContent = message;
  errorDiv.style.display = 'block';
}

function clearFieldError(fieldId) {
  const field = document.getElementById(fieldId);
  const errorDiv = document.getElementById(`${fieldId}-error`);
  
  field.style.borderColor = '#ccc';
  errorDiv.textContent = '';
  errorDiv.style.display = 'none';
}

function clearAllErrors() {
  ['firstName', 'lastName', 'email', 'phone'].forEach(clearFieldError);
}

function showModal(title, message, isError = false) {
  const modal = document.getElementById('response-modal');
  const modalTitle = document.getElementById('modal-title');
  const modalMessage = document.getElementById('modal-message');
  const modalIcon = document.getElementById('modal-icon');
  
  modalTitle.textContent = title;
  modalMessage.textContent = message;
  modalIcon.textContent = isError ? 'âŒ' : 'âœ…';
  modalIcon.style.color = isError ? '#ff6b6b' : '#555C4A';
  
  modal.style.display = 'flex';
}

function closeModal() {
  document.getElementById('response-modal').style.display = 'none';
}

document.getElementById("landing-form").addEventListener("submit", async function (e) {
  e.preventDefault();

  // Clear previous errors
  clearAllErrors();

  const firstName = document.getElementById("firstName").value.trim();
  const lastName = document.getElementById("lastName").value.trim();
  const email = document.getElementById("email").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const consent = document.getElementById("consent").checked;

  const submitBtn = e.target.querySelector("button");
  let hasErrors = false;

  // ðŸŽ¯ Frontend Validation
  if (!firstName) {
    showFieldError('firstName', 'First name is required.');
    hasErrors = true;
  } else if (!validateName(firstName)) {
    showFieldError('firstName', 'First name can only contain letters, spaces, and hyphens.');
    hasErrors = true;
  }

  if (!lastName) {
    showFieldError('lastName', 'Last name is required.');
    hasErrors = true;
  } else if (!validateName(lastName)) {
    showFieldError('lastName', 'Last name can only contain letters, spaces, and hyphens.');
    hasErrors = true;
  }

  if (!email) {
    showFieldError('email', 'Email address is required.');
    hasErrors = true;
  } else if (!validateEmail(email)) {
    showFieldError('email', 'Please enter a valid email address.');
    hasErrors = true;
  }

  if (phone && !validatePhone(phone)) {
    showFieldError('phone', 'Please enter a valid 10-digit phone number starting with 6-9.');
    hasErrors = true;
  }

  if (hasErrors) return;

  const payload = { firstName, lastName, email, phone, consent };

  try {
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    const response = await fetch("http://localhost:5000/api/v1/landing/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
    });

    const data = await response.json();

    if (response.ok && data.success) {
      // ðŸŽ‰ Show success modal
      showModal(
        'Registration Successful!',
        `Thank you, ${firstName}! You've successfully registered. Check your inbox for your exclusive 10% off coupon!`
      );
      
      // Reset form
      e.target.reset();
      clearAllErrors();
    } else {
      // ðŸš¨ Show error modal
      showModal(
        'Registration Failed',
        data.message || 'Something went wrong. Please try again.',
        true
      );
    }
  } catch (error) {
    console.error("Error submitting form:", error);
    showModal(
      'Server Error',
      'Server error, please try again later.',
      true
    );
  } finally {
    submitBtn.disabled = false;
    submitBtn.textContent = "Sign Up";
  }
});

// Setup modal close functionality
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById("response-modal");
  const closeBtn = document.getElementById("close-response-modal");
  
  // Close modal when clicking the button
  closeBtn.addEventListener("click", closeModal);
  
  // Close modal when clicking outside
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });
  
  // Close modal with Escape key
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.style.display === "flex") {
      closeModal();
    }
  });
});
</script>

<!-- âœ… Response Modal (Success/Error) -->
<div id="response-modal" class="modal-overlay" style="display:none;">
  <div class="modal-box">
    <div class="modal-icon" id="modal-icon">âœ…</div>
    <h2 id="modal-title">Registration Successful!</h2>
    <p id="modal-message">Thank you for signing up! Check your email for your exclusive coupon.</p>
    <button id="close-response-modal" class="modal-button">Got It</button>
  </div>
</div>

<style>
  /* Error Message Styling */
  .error-message {
    display: none;
    color: #ff6b6b;
    font-size: 0.75rem;
    margin-top: 4px;
    font-weight: 500;
  }

  .form-group input.error {
    border-color: #ff6b6b !important;
    box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.1);
  }

  /* Modal Styling */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    backdrop-filter: blur(4px);
  }

  .modal-box {
    background: linear-gradient(135deg, #fefefe 0%, #f8f6f3 100%);
    color: #333;
    padding: 2.5rem;
    border-radius: 20px;
    text-align: center;
    width: 90%;
    max-width: 420px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    border: 1px solid #e8e5e0;
    font-family: 'Poppins', sans-serif;
    transform: scale(0.9);
    animation: modalAppear 0.3s ease-out forwards;
  }

  @keyframes modalAppear {
    to {
      transform: scale(1);
    }
  }

  .modal-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    display: block;
  }

  .modal-box h2 {
    margin-bottom: 1rem;
    color: #555C4A;
    font-size: 1.5rem;
    font-weight: 600;
  }

  .modal-box p {
    margin-bottom: 1.5rem;
    color: #666;
    line-height: 1.5;
    font-size: 0.95rem;
  }

  .modal-button {
    padding: 0.75rem 2rem;
    border: none;
    border-radius: 12px;
    background: linear-gradient(135deg, #555C4A 0%, #6b7559 100%);
    color: #fff;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(85, 92, 74, 0.3);
  }

  .modal-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(85, 92, 74, 0.4);
    background: linear-gradient(135deg, #6b7559 0%, #555C4A 100%);
  }

  .modal-button:active {
    transform: translateY(0);
  }

  /* Form Input Enhanced Styling */
  .form-group input {
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .form-group input:focus {
    border-color: #555C4A;
    box-shadow: 0 0 0 2px rgba(85, 92, 74, 0.1);
    outline: none;
  }

  /* Remove old popup styles if they exist */
  .popup-overlay {
    display: none !important;
  }
</style>

</body>
</html>
